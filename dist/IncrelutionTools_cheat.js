/* 
 * https://github.com/lgl017temp/increlution-tools
 * 将本文件放在electron-index.html旁，以下代码段放在最后html最后
 * <script src="IncrelutionTools_cheat.js" type="module" charset="utf-8"></script>
 */
let e={locale:"cn"},d={},E="cn",m=[],l,b;function k(){w();let n=document.createElement("style");n.innerHTML="#action-containers-column .row.game-block-container:last-child { margin-bottom: 30px; }",document.head.appendChild(n),l=$('<div style="display: flex; align-items: flex-end;flex-wrap: wrap;flex-direction: row;justify-content: flex-end;position: absolute; bottom: 0; left: 0; max-width: 100vw;"></div>'),b=$(`<button style="margin-left: 40px;height:20px;padding:0 10px;font-size:12px;width: fit-content; display: inline-block; vertical-align: sub; margin-right: 10px;" type="button" class="btn btn-block btn-light""><span>${s(`lang[${e.locale}]`)}</span></button>`),l.append(b),b.on("click",function(a){let t=Object.keys(d),i=t.indexOf(e.locale);i===-1&&(i=0),i++,i%=t.length,e.locale=t[i],o(),A()}),m.forEach(a=>{a.settings&&Object.keys(a.settings).forEach(t=>{e[t]===void 0&&(e[t]=a.settings[t])}),a.init&&a.init()}),l.appendTo("body"),x()}function w(){if(localStorage&&localStorage.getItem("cheatSettings")){let n=JSON.parse(localStorage.getItem("cheatSettings"));Object.keys(n).forEach(a=>{e[a]=n[a]})}}function o(){localStorage&&localStorage.setItem("cheatSettings",JSON.stringify(e))}function x(){m.forEach(n=>{n.toggle&&n.toggle()})}function A(){b.find("span").html(s(`lang[${e.locale}]`)),m.forEach(n=>{n.changeLocale&&n.changeLocale()})}function s(n){let a=d[e.locale],t=n.split(/\.|\[/).map(g=>g.replace(/\]$/,"")),i=a,y=!1;if(t.every(g=>i instanceof Object?(i=i[g],!0):(console.error(`message not found: ${n}, in locale ${e.locale}`),y=!0,!1)),i===void 0&&(console.error(`message not found: ${n}, in locale ${e.locale}`),y=!0),!y)return i;let C=!1;return a=d[E],i=a,t.every(g=>i instanceof Object?(i=i[g],!0):(console.error(`message not found: ${n}, in locale ${E}`),C=!0,!1)),i===void 0&&(console.error(`message not found: ${n}, in locale ${E}`),C=!0),C?n:i}function T(n){return window.Function(`"use strict";return ${n};`)()}let F,S=new Promise(n=>{F=n}),M=setInterval(function(){game&&(clearInterval(M),k(),F())},1e3),p,c,h,r,f,u,v;m.push({init:()=>{v=$(`<button style="height:20px;padding:0 10px;font-size:12px;width: fit-content; display: inline-block; vertical-align: sub; margin-right: 10px;" id="pause-button" type="button" class="btn btn-block btn-success ${e.showCheat?"running":"paused"}"><i class="fas ${e.showCheat?"fa-play":"fa-pause"}"></i> <span>${s("cheat.toggleCheat")}</span></button>`),l.append(v),v.on("click",function(){e.showCheat?(e.showCheat=!1,$(this).addClass("paused").removeClass("running"),$(this).find("i").addClass("fa-pause").removeClass("fa-play")):(e.showCheat=!0,$(this).removeClass("paused").addClass("running"),$(this).find("i").removeClass("fa-pause").addClass("fa-play")),o(),x()}),p=$(`<button style="height:20px;padding:0 10px;font-size:12px;width: fit-content; display: inline-block; vertical-align: sub; margin-right: 10px;" id="pause-button" type="button" class="btn btn-block btn-success ${e.speedEn?"running":"paused"}"><i class="fas ${e.speedEn?"fa-play":"fa-pause"}"></i> <span><input style="display: inline-block;width: 52px;text-align:center;height: 12px;font-size:12px;" type="text" class="form-control maxlength="3"> <span>${s("cheat.speed")}</span></span></button>`),l.append(p),p.find("input").val(e.speedMul).on("input",function(){let t=+$(this).val();if(isNaN(t)||t===1/0||t===-1/0||t%1!==0||t<=0){$(this).val(e.speedMul);return}e.speedMul=t,o()}),p.on("click",function(t){t.target instanceof HTMLInputElement||(e.speedEn?(e.speedEn=!1,$(this).addClass("paused").removeClass("running"),$(this).find("i").addClass("fa-pause").removeClass("fa-play")):(e.speedEn=!0,$(this).removeClass("paused").addClass("running"),$(this).find("i").removeClass("fa-pause").addClass("fa-play")),o())}),c=$(`<button style="height:20px;padding:0 10px;font-size:12px;width: fit-content; display: inline-block; vertical-align: sub; margin-right: 10px;" id="pause-button" type="button" class="btn btn-block btn-success ${e.skillEn?"running":"paused"}"><i class="fas ${e.skillEn?"fa-play":"fa-pause"}"></i> <span><input style="display: inline-block;width: 52px;text-align:center;height: 12px;font-size:12px;" type="text" class="form-control maxlength="3"> <span>${s("cheat.skill")}</span></span></button>`),l.append(c),c.find("input").val(e.skillMul).on("input",function(){let t=+$(this).val();if(isNaN(t)||t===1/0||t===-1/0||t%1!==0||t<=0){$(this).val(e.skillMul);return}e.skillMul=t,o()}),c.on("click",function(t){t.target instanceof HTMLInputElement||(e.skillEn?(e.skillEn=!1,$(this).addClass("paused").removeClass("running"),$(this).find("i").addClass("fa-pause").removeClass("fa-play")):(e.skillEn=!0,$(this).removeClass("paused").addClass("running"),$(this).find("i").removeClass("fa-pause").addClass("fa-play")),o())}),h=$(`<button style="height:20px;padding:0 10px;font-size:12px;width: fit-content; display: inline-block; vertical-align: sub; margin-right: 10px;" id="pause-button" type="button" class="btn btn-block btn-success ${e.healthEn?"running":"paused"}"><i class="fas ${e.healthEn?"fa-play":"fa-pause"}"></i> <span>${s("cheat.health")}</span></button>`),l.append(h),h.on("click",function(){e.healthEn?(e.healthEn=!1,$(this).addClass("paused").removeClass("running"),$(this).find("i").addClass("fa-pause").removeClass("fa-play")):(e.healthEn=!0,$(this).removeClass("paused").addClass("running"),$(this).find("i").removeClass("fa-pause").addClass("fa-play")),o()}),r=$(`<button style="height:20px;padding:0 10px;font-size:12px;width: fit-content; display: inline-block; vertical-align: sub; margin-right: 10px;" id="pause-button" type="button" class="btn btn-block btn-success ${e.inventoryEn?"running":"paused"}"><i class="fas ${e.inventoryEn?"fa-play":"fa-pause"}"></i> <span>${s("cheat.storge")}</span></button>`),l.append(r),r.on("click",function(){e.inventoryEn?(e.inventoryEn=!1,$(this).addClass("paused").removeClass("running"),$(this).find("i").addClass("fa-pause").removeClass("fa-play")):(e.inventoryEn=!0,$(this).removeClass("paused").addClass("running"),$(this).find("i").removeClass("fa-pause").addClass("fa-play")),o()}),f=$(`<button style="height:20px;padding:0 10px;font-size:12px;width: fit-content; display: inline-block; vertical-align: sub; margin-right: 10px;" id="pause-button" type="button" class="btn btn-block btn-success ${e.rebirthEn?"running":"paused"}"><i class="fas ${e.rebirthEn?"fa-play":"fa-pause"}"></i> <span>${s("cheat.rebirth")}</span></button>`),l.append(f),f.on("click",function(){e.rebirthEn?(e.rebirthEn=!1,$(this).addClass("paused").removeClass("running"),$(this).find("i").addClass("fa-pause").removeClass("fa-play")):(e.rebirthEn=!0,$(this).removeClass("paused").addClass("running"),$(this).find("i").removeClass("fa-pause").addClass("fa-play")),o()});let n=3,a=0;u=$(`<button style="height:20px;padding:0 10px;font-size:12px;width: fit-content; display: inline-block; vertical-align: sub; margin-right: 10px;" type="button" class="btn btn-block btn-light" data-original-title="${s("cheat.autoTip")}"><span>${s("cheat.auto")}</span></button>`),l.append(u),u.on("mousedown",function(){$(this).find("span").html("&emsp;&emsp;"+n+"&emsp;&emsp;"),a=window.setInterval(()=>{n!=0?(n--,$(this).find("span").html("&emsp;&emsp;"+n+"&emsp;&emsp;")):game&&(clearInterval(a),n=3,$(this).find("span").html(s("cheat.auto")),game.jobs.forEach(t=>{t.isAutomationUnlocked||(t.isAutomationUnlocked=!0,t.shouldAutomate===null&&(t.shouldAutomate=0))}),game.construction.forEach(t=>{t.isAutomationUnlocked||(t.isAutomationUnlocked=!0,t.shouldAutomate===null&&(t.shouldAutomate=0))}),game.exploration.forEach(t=>{t.isAutomationUnlocked||(t.isAutomationUnlocked=!0,t.shouldAutomate===null&&(t.shouldAutomate=0))}),setTimeout(()=>{$("#option-export-save-button").click(),setTimeout(()=>{navigator.clipboard.readText().then(t=>{$("#import-save-textarea").val(t),$("#import-save-textarea").trigger("change"),$("#import-save-confirm-button").click()})},200)},1e3))},1e3)}),$(document).on("mouseup",function(){clearInterval(a),n=3,u.find("span").html(s("cheat.auto"))})},settings:{speedMul:10,speedEn:!1,skillMul:10,skillEn:!1,inventoryEn:!1,healthEn:!1,rebirthEn:!1,showCheat:!1},toggle:()=>{e.showCheat?(p.show(),c.show(),h.show(),r.show(),f.show(),u.show()):(p.hide(),c.hide(),h.hide(),r.hide(),f.hide(),u.hide())},changeLocale:()=>{p.find("span").find("span").html(s("cheat.speed")),c.find("span").find("span").html(s("cheat.skill")),h.find("span").html(s("cheat.health")),r.find("span").html(s("cheat.storge")),f.find("span").html(s("cheat.rebirth")),u.find("span").html(s("cheat.auto")),u.attr("data-original-title",s("cheat.autoTip")),v.find("span").html(s("cheat.toggleCheat"))}}),S.then(()=>{if(setInterval(function(){try{game&&e.speedEn&&(game.lastTimeStamp-=20*(e.speedMul-1))}catch{}},20),setInterval(function(){try{e.rebirthEn&&$("#reincarnate-button:visible").click()}catch{}},200),game){let n=game.inventory[0][0].amount.__proto__.add;game.inventory[0][0].amount.__proto__.add=function(a){return e.inventoryEn&&game.inventory.find(t=>t.find(i=>i.amount===this))&&a.lessThan(0)&&(a=new Decimal(0)),e.skillEn&&game.skills.find(t=>t.generationExperience===this||t.instinctExperience===this)&&a.greaterThan(0)&&(a=a.mul(e.skillMul)),e.healthEn&&game.health===this&&a.lessThan(0)&&(a=new Decimal(0)),n.bind(this)(a)}}}),d.cn={lang:{cn:"\u4E2D\u6587",en:"english"},cheat:{toggleCheat:"\u663E\u793A\u4FEE\u6539",speed:"\u500D\u901F",skill:"\u500D\u7ECF\u9A8C",health:"\u9501\u8840",storge:"\u9501\u5E93\u5B58",rebirth:"\u81EA\u52A8\u8F6C\u751F",auto:"\u89E3\u9501\u81EA\u52A8",autoTip:"\u8BF7\u5148\u5907\u4EFD\u5B58\u6863\uFF0C\u6B64\u64CD\u4F5C\u65E0\u64A4\u9500\uFF01<br/>(\u4F7F\u7528\u5B58\u8BFB\u6863\u65B9\u5F0F)<br/>(\u6309\u4F4F3\u79D2)"},chart:{togglePath:"\u663E\u793A\u8DEF\u7EBF",chepPrefix:"\u7B2C",chepSuffix:"\u7AE0",end:"\u7ED3\u675F",spoiler:"\u5141\u8BB8\u5267\u900F"}},d.en={lang:{cn:"\u4E2D\u6587",en:"English"},cheat:{toggleCheat:"Show Cheat",speed:"Times Speed",skill:"Times Exp",health:"Lock Health",storge:"Lock Storge",rebirth:"Auto Rebirth",auto:"Unlock All Auto",autoTip:"Please backup save first, can't undo!<br/>(use save and load implement)<br/>(press 3 sec)"},chart:{togglePath:"Show Path",chepPrefix:"Chep. ",chepSuffix:"",end:"End",spoiler:"Allow Spoiler"}};export{l as btnContainer,A as changeLocale,T as doEval,S as gameLoadPromise,s as getLocal,k as init,w as load,d as locales,m as plugins,o as save,e as settings,x as toggle};
