/* 
 * https://github.com/lgl017temp/increlution-tools
 * 将本文件放在electron-index.html旁，以下代码段放在最后html最后
 * <script src="IncrelutionTools_cheat.js" type="module" charset="utf-8"></script>
 */
let t={},h=[],e;function g(){m(),e=$('<div style="display: flex; align-items: flex-end;flex-wrap: wrap;flex-direction: row;justify-content: flex-end;position: absolute; bottom: 0; right:0; max-width: 100vw;"></div>'),h.forEach(a=>{a.settings&&Object.keys(a.settings).forEach(s=>{t[s]===void 0&&(t[s]=a.settings[s])}),a.init&&a.init()}),e.appendTo("body"),c()}function m(){if(localStorage&&localStorage.getItem("cheatSettings")){let a=JSON.parse(localStorage.getItem("cheatSettings"));Object.keys(a).forEach(s=>{t[s]=a[s]})}}function i(){localStorage&&localStorage.setItem("cheatSettings",JSON.stringify(t))}function c(){h.forEach(a=>{a.toggle&&a.toggle()})}let b,v=new Promise(a=>{b=a}),E=setInterval(function(){game&&(clearInterval(E),g(),b())},1e3),l,u,p,d,r,o,f;h.push({init:()=>{l=$(`<button style="height:20px;padding:0 10px;font-size:12px;width: fit-content; display: inline-block; vertical-align: sub; margin-right: 10px;" id="pause-button" type="button" class="btn btn-block btn-success ${t.speedEn?"running":"paused"}" data-original-title="\u500D\u901F"><i class="fas ${t.speedEn?"fa-play":"fa-pause"}"></i> <span><input style="display: inline-block;width: 52px;text-align:center;height: 12px;font-size:12px;" type="text" class="form-control maxlength="3"> \u500D\u901F</span></button>`),e.append(l),l.find("input").val(t.speedMul).on("input",function(){let n=+$(this).val();if(isNaN(n)||n===1/0||n===-1/0||n%1!==0||n<=0){$(this).val(t.speedMul);return}t.speedMul=n,i()}),l.on("click",function(n){n.target instanceof HTMLInputElement||(t.speedEn?(t.speedEn=!1,$(this).addClass("paused").removeClass("running"),$(this).find("i").addClass("fa-pause").removeClass("fa-play")):(t.speedEn=!0,$(this).removeClass("paused").addClass("running"),$(this).find("i").removeClass("fa-pause").addClass("fa-play")),i())}),u=$(`<button style="height:20px;padding:0 10px;font-size:12px;width: fit-content; display: inline-block; vertical-align: sub; margin-right: 10px;" id="pause-button" type="button" class="btn btn-block btn-success ${t.skillEn?"running":"paused"}" data-original-title="\u6280\u80FD\u7ECF\u9A8C"><i class="fas ${t.skillEn?"fa-play":"fa-pause"}"></i> <span><input style="display: inline-block;width: 52px;text-align:center;height: 12px;font-size:12px;" type="text" class="form-control maxlength="3"> \u500D\u7ECF\u9A8C</span></button>`),e.append(u),u.find("input").val(t.skillMul).on("input",function(){let n=+$(this).val();if(isNaN(n)||n===1/0||n===-1/0||n%1!==0||n<=0){$(this).val(t.skillMul);return}t.skillMul=n,i()}),u.on("click",function(n){n.target instanceof HTMLInputElement||(t.skillEn?(t.skillEn=!1,$(this).addClass("paused").removeClass("running"),$(this).find("i").addClass("fa-pause").removeClass("fa-play")):(t.skillEn=!0,$(this).removeClass("paused").addClass("running"),$(this).find("i").removeClass("fa-pause").addClass("fa-play")),i())}),p=$(`<button style="height:20px;padding:0 10px;font-size:12px;width: fit-content; display: inline-block; vertical-align: sub; margin-right: 10px;" id="pause-button" type="button" class="btn btn-block btn-success ${t.healthEn?"running":"paused"}" data-original-title="\u9501\u8840"><i class="fas ${t.healthEn?"fa-play":"fa-pause"}"></i> <span>\u9501\u8840</span></button>`),e.append(p),p.on("click",function(){t.healthEn?(t.healthEn=!1,$(this).addClass("paused").removeClass("running"),$(this).find("i").addClass("fa-pause").removeClass("fa-play")):(t.healthEn=!0,$(this).removeClass("paused").addClass("running"),$(this).find("i").removeClass("fa-pause").addClass("fa-play")),i()}),d=$(`<button style="height:20px;padding:0 10px;font-size:12px;width: fit-content; display: inline-block; vertical-align: sub; margin-right: 10px;" id="pause-button" type="button" class="btn btn-block btn-success ${t.inventoryEn?"running":"paused"}" data-original-title="\u9501\u5E93\u5B58"><i class="fas ${t.inventoryEn?"fa-play":"fa-pause"}"></i> <span>\u9501\u5E93\u5B58</span></button>`),e.append(d),d.on("click",function(){t.inventoryEn?(t.inventoryEn=!1,$(this).addClass("paused").removeClass("running"),$(this).find("i").addClass("fa-pause").removeClass("fa-play")):(t.inventoryEn=!0,$(this).removeClass("paused").addClass("running"),$(this).find("i").removeClass("fa-pause").addClass("fa-play")),i()}),r=$(`<button style="height:20px;padding:0 10px;font-size:12px;width: fit-content; display: inline-block; vertical-align: sub; margin-right: 10px;" id="pause-button" type="button" class="btn btn-block btn-success ${t.rebirthEn?"running":"paused"}" data-original-title="\u81EA\u52A8\u8F6C\u751F"><i class="fas ${t.rebirthEn?"fa-play":"fa-pause"}"></i> <span>\u81EA\u52A8\u8F6C\u751F</span></button>`),e.append(r),r.on("click",function(){t.rebirthEn?(t.rebirthEn=!1,$(this).addClass("paused").removeClass("running"),$(this).find("i").addClass("fa-pause").removeClass("fa-play")):(t.rebirthEn=!0,$(this).removeClass("paused").addClass("running"),$(this).find("i").removeClass("fa-pause").addClass("fa-play")),i()});let a=3,s=0;o=$('<button style="height:20px;padding:0 10px;font-size:12px;width: fit-content; display: inline-block; vertical-align: sub; margin-right: 10px;" type="button" class="btn btn-block btn-light" data-original-title="\u8BF7\u5148\u5907\u4EFD\u5B58\u6863\uFF0C\u6B64\u64CD\u4F5C\u65E0\u64A4\u9500\uFF01(\u4F7F\u7528\u5B58\u8BFB\u6863\u65B9\u5F0F)(\u6309\u4F4F3\u79D2)"><i class="fas"></i> <span>\u89E3\u9501\u81EA\u52A8</span></button>'),e.append(o),o.on("mousedown",function(){$(this).find("span").html("&emsp;&emsp;"+a+"&emsp;&emsp;"),s=window.setInterval(()=>{a!=0?(a--,$(this).find("span").html("&emsp;&emsp;"+a+"&emsp;&emsp;")):game&&(clearInterval(s),a=3,$(this).find("span").html("\u89E3\u9501\u81EA\u52A8"),game.jobs.forEach(n=>{n.isAutomationUnlocked||(n.isAutomationUnlocked=!0,n.shouldAutomate===null&&(n.shouldAutomate=0))}),game.construction.forEach(n=>{n.isAutomationUnlocked||(n.isAutomationUnlocked=!0,n.shouldAutomate===null&&(n.shouldAutomate=0))}),game.exploration.forEach(n=>{n.isAutomationUnlocked||(n.isAutomationUnlocked=!0,n.shouldAutomate===null&&(n.shouldAutomate=0))}),setTimeout(()=>{$("#option-export-save-button").click(),setTimeout(()=>{navigator.clipboard.readText().then(n=>{$("#import-save-textarea").val(n),$("#import-save-textarea").trigger("change"),$("#import-save-confirm-button").click()})},200)},1e3))},1e3)}),$(document).on("mouseup",function(){clearInterval(s),a=3,o.find("span").html("\u89E3\u9501\u81EA\u52A8")}),f=$(`<button style="height:20px;padding:0 10px;font-size:12px;width: fit-content; display: inline-block; vertical-align: sub; margin-right: 10px;" id="pause-button" type="button" class="btn btn-block btn-success ${t.showCheat?"running":"paused"}" data-original-title="\u663E\u793A\u4FEE\u6539"><i class="fas ${t.showCheat?"fa-play":"fa-pause"}"></i> <span>\u663E\u793A\u4FEE\u6539</span></button>`),e.append(f),f.on("click",function(){t.showCheat?(t.showCheat=!1,$(this).addClass("paused").removeClass("running"),$(this).find("i").addClass("fa-pause").removeClass("fa-play")):(t.showCheat=!0,$(this).removeClass("paused").addClass("running"),$(this).find("i").removeClass("fa-pause").addClass("fa-play")),i(),c()})},settings:{speedMul:10,speedEn:!1,skillMul:10,skillEn:!1,inventoryEn:!1,healthEn:!1,rebirthEn:!1,showCheat:!1},toggle:()=>{t.showCheat?(l.show(),u.show(),p.show(),d.show(),r.show(),o.show()):(l.hide(),u.hide(),p.hide(),d.hide(),r.hide(),o.hide())}}),v.then(()=>{if(setInterval(function(){try{game&&t.speedEn&&(game.lastTimeStamp-=20*(t.speedMul-1))}catch{}},20),setInterval(function(){try{t.rebirthEn&&$("#reincarnate-button:visible").click()}catch{}},200),game){let a=game.inventory[0][0].amount.__proto__.add;game.inventory[0][0].amount.__proto__.add=function(s){return t.inventoryEn&&game.inventory.find(n=>n.find(C=>C.amount===this))&&s.lessThan(0)&&(s=new Decimal(0)),t.skillEn&&game.skills.find(n=>n.generationExperience===this||n.instinctExperience===this)&&s.greaterThan(0)&&(s=s.mul(t.skillMul)),t.healthEn&&game.health===this&&s.lessThan(0)&&(s=new Decimal(0)),a.bind(this)(s)}}});export{e as btnContainer,v as gameLoadPromise,g as init,m as load,h as plugins,i as save,t as settings,c as toggle};
