/* 
 * https://github.com/lgl017temp/increlution-tools
 * 将本文件放在electron-index.html旁，以下代码段放在最后html最后
 * <script src="IncrelutionTools_cheat.js" type="module" charset="utf-8"></script>
 */
let t={locale:"cn"},f={},x="cn",y=[],T=class extends HTMLElement{wrapper;constructor(){super();const n=this.attachShadow({mode:"open"}),a=document.createElement("link");a.href="helpers/bootstrap.min.css",a.rel="stylesheet",a.type="text/css",n.appendChild(a);const e=document.createElement("link");e.href="helpers/fontawesome-pro-5.13.0-web/css/all.min.css",e.rel="stylesheet",e.type="text/css",n.appendChild(e);const s=document.createElement("link");s.href="gsrv.css",s.rel="stylesheet",s.type="text/css",n.appendChild(s),this.wrapper=document.createElement("body"),window.document.body.classList.contains("dark")&&this.wrapper.classList.add("dark"),n.appendChild(this.wrapper),new MutationObserver(r=>{r.forEach(u=>{u.type!=="attributes"&&u.attributeName!=="class"||(window.document.body.classList.contains("dark")?this.wrapper.classList.add("dark"):this.wrapper.classList.remove("dark"))})}).observe(window.document.body,{attributes:!0})}getFormControlStyle(n="input"){let a=document.createElement(n);a.classList.add("form-control"),a.style.display="none",this.wrapper.appendChild(a);let e=a.computedStyleMap(),s={};return e.forEach((r,u)=>{s[u]=r.map(c=>c.toString())}),this.wrapper.removeChild(a),s}},l,E,C;function w(){A();let n=document.createElement("style");n.innerHTML="#action-containers-column .row.game-block-container:last-child { margin-bottom: 30px; }",document.head.appendChild(n),customElements.define("tool-container",T),E=$('<tool-container style="display: flex; align-items: flex-end;flex-wrap: wrap;flex-direction: row;justify-content: flex-end;position: absolute; bottom: 0; left: 0; max-width: 100vw;"></tool-container>'),l=$(E[0].wrapper),C=$(`<button style="margin-left: 40px;height:20px;padding:0 10px;font-size:12px;width: fit-content; display: inline-block; vertical-align: sub; margin-right: 10px;" type="button" class="btn btn-block btn-light""><span>${i(`lang[${t.locale}]`)}</span></button>`),l.append(C),C.on("click",function(a){let e=Object.keys(f),s=e.indexOf(t.locale);s===-1&&(s=0),s++,s%=e.length,t.locale=e[s],o(),F()}),y.forEach(a=>{a.settings&&Object.keys(a.settings).forEach(e=>{t[e]===void 0&&(t[e]=a.settings[e])}),a.init&&a.init()}),E.appendTo("body"),k()}function A(){if(localStorage&&localStorage.getItem("cheatSettings")){let n=JSON.parse(localStorage.getItem("cheatSettings"));Object.keys(n).forEach(a=>{t[a]=n[a]})}}function o(){localStorage&&localStorage.setItem("cheatSettings",JSON.stringify(t))}function k(){y.forEach(n=>{n.toggle&&n.toggle()})}function F(){C.find("span").html(i(`lang[${t.locale}]`)),y.forEach(n=>{n.changeLocale&&n.changeLocale()})}function i(n){let a=f[t.locale],e=n.split(/\.|\[/).map(c=>c.replace(/\]$/,"")),s=a,r=!1;if(e.every(c=>s instanceof Object?(s=s[c],!0):(console.error(`message not found: ${n}, in locale ${t.locale}`),r=!0,!1)),s===void 0&&(console.error(`message not found: ${n}, in locale ${t.locale}`),r=!0),!r)return s;let u=!1;return a=f[x],s=a,e.every(c=>s instanceof Object?(s=s[c],!0):(console.error(`message not found: ${n}, in locale ${x}`),u=!0,!1)),s===void 0&&(console.error(`message not found: ${n}, in locale ${x}`),u=!0),u?n:s}function M(n){return window.Function(`"use strict";return ${n};`)()}let L,S=new Promise(n=>{L=n}),D=setInterval(function(){game&&(clearInterval(D),w(),L())},1e3),d,h,g,m,b,p,v;y.push({init:()=>{v=$(`<button style="height:20px;padding:0 10px;font-size:12px;width: fit-content; display: inline-block; vertical-align: sub; margin-right: 10px;" id="pause-button" type="button" class="btn btn-block btn-success ${t.showCheat?"running":"paused"}"><i class="fas ${t.showCheat?"fa-play":"fa-pause"}"></i> <span>${i("cheat.toggleCheat")}</span></button>`),l.append(v),v.on("click",function(){t.showCheat?(t.showCheat=!1,$(this).addClass("paused").removeClass("running"),$(this).find("i").addClass("fa-pause").removeClass("fa-play")):(t.showCheat=!0,$(this).removeClass("paused").addClass("running"),$(this).find("i").removeClass("fa-pause").addClass("fa-play")),o(),k()}),d=$(`<button style="height:20px;padding:0 10px;font-size:12px;width: fit-content; display: inline-block; vertical-align: sub; margin-right: 10px;" id="pause-button" type="button" class="btn btn-block btn-success ${t.speedEn?"running":"paused"}"><i class="fas ${t.speedEn?"fa-play":"fa-pause"}"></i> <span><input style="display: inline-block;width: 52px;text-align:center;height: 12px;font-size:12px;" type="text" class="form-control" maxlength="3"> <span>${i("cheat.speed")}</span></span></button>`),l.append(d),d.find("input").val(t.speedMul).on("input",function(){let e=+$(this).val();if(isNaN(e)||e===1/0||e===-1/0||e%1!==0||e<=0){$(this).val(t.speedMul);return}t.speedMul=e,o()}),d.on("click",function(e){e.target instanceof HTMLInputElement||(t.speedEn?(t.speedEn=!1,$(this).addClass("paused").removeClass("running"),$(this).find("i").addClass("fa-pause").removeClass("fa-play")):(t.speedEn=!0,$(this).removeClass("paused").addClass("running"),$(this).find("i").removeClass("fa-pause").addClass("fa-play")),o())}),h=$(`<button style="height:20px;padding:0 10px;font-size:12px;width: fit-content; display: inline-block; vertical-align: sub; margin-right: 10px;" id="pause-button" type="button" class="btn btn-block btn-success ${t.skillEn?"running":"paused"}"><i class="fas ${t.skillEn?"fa-play":"fa-pause"}"></i> <span><input style="display: inline-block;width: 52px;text-align:center;height: 12px;font-size:12px;" type="text" class="form-control" maxlength="3"> <span>${i("cheat.skill")}</span></span></button>`),l.append(h),h.find("input").val(t.skillMul).on("input",function(){let e=+$(this).val();if(isNaN(e)||e===1/0||e===-1/0||e%1!==0||e<=0){$(this).val(t.skillMul);return}t.skillMul=e,o()}),h.on("click",function(e){e.target instanceof HTMLInputElement||(t.skillEn?(t.skillEn=!1,$(this).addClass("paused").removeClass("running"),$(this).find("i").addClass("fa-pause").removeClass("fa-play")):(t.skillEn=!0,$(this).removeClass("paused").addClass("running"),$(this).find("i").removeClass("fa-pause").addClass("fa-play")),o())}),g=$(`<button style="height:20px;padding:0 10px;font-size:12px;width: fit-content; display: inline-block; vertical-align: sub; margin-right: 10px;" id="pause-button" type="button" class="btn btn-block btn-success ${t.healthEn?"running":"paused"}"><i class="fas ${t.healthEn?"fa-play":"fa-pause"}"></i> <span>${i("cheat.health")}</span></button>`),l.append(g),g.on("click",function(){t.healthEn?(t.healthEn=!1,$(this).addClass("paused").removeClass("running"),$(this).find("i").addClass("fa-pause").removeClass("fa-play")):(t.healthEn=!0,$(this).removeClass("paused").addClass("running"),$(this).find("i").removeClass("fa-pause").addClass("fa-play")),o()}),m=$(`<button style="height:20px;padding:0 10px;font-size:12px;width: fit-content; display: inline-block; vertical-align: sub; margin-right: 10px;" id="pause-button" type="button" class="btn btn-block btn-success ${t.inventoryEn?"running":"paused"}"><i class="fas ${t.inventoryEn?"fa-play":"fa-pause"}"></i> <span>${i("cheat.storge")}</span></button>`),l.append(m),m.on("click",function(){t.inventoryEn?(t.inventoryEn=!1,$(this).addClass("paused").removeClass("running"),$(this).find("i").addClass("fa-pause").removeClass("fa-play")):(t.inventoryEn=!0,$(this).removeClass("paused").addClass("running"),$(this).find("i").removeClass("fa-pause").addClass("fa-play")),o()}),b=$(`<button style="height:20px;padding:0 10px;font-size:12px;width: fit-content; display: inline-block; vertical-align: sub; margin-right: 10px;" id="pause-button" type="button" class="btn btn-block btn-success ${t.rebirthEn?"running":"paused"}"><i class="fas ${t.rebirthEn?"fa-play":"fa-pause"}"></i> <span>${i("cheat.rebirth")}</span></button>`),l.append(b),b.on("click",function(){t.rebirthEn?(t.rebirthEn=!1,$(this).addClass("paused").removeClass("running"),$(this).find("i").addClass("fa-pause").removeClass("fa-play")):(t.rebirthEn=!0,$(this).removeClass("paused").addClass("running"),$(this).find("i").removeClass("fa-pause").addClass("fa-play")),o()});let n=3,a=0;p=$(`<button style="height:20px;padding:0 10px;font-size:12px;width: fit-content; display: inline-block; vertical-align: sub; margin-right: 10px;" type="button" class="btn btn-block btn-light" data-original-title="${i("cheat.autoTip")}"><span>${i("cheat.auto")}</span></button>`),l.append(p),p.on("mousedown",function(){$(this).find("span").html("&emsp;&emsp;"+n+"&emsp;&emsp;"),a=window.setInterval(()=>{n!=0?(n--,$(this).find("span").html("&emsp;&emsp;"+n+"&emsp;&emsp;")):game&&(clearInterval(a),n=3,$(this).find("span").html(i("cheat.auto")),game.jobs.forEach(e=>{e.isAutomationUnlocked||(e.isAutomationUnlocked=!0,e.shouldAutomate===null&&(e.shouldAutomate=0))}),game.construction.forEach(e=>{e.isAutomationUnlocked||(e.isAutomationUnlocked=!0,e.shouldAutomate===null&&(e.shouldAutomate=0))}),game.exploration.forEach(e=>{e.isAutomationUnlocked||(e.isAutomationUnlocked=!0,e.shouldAutomate===null&&(e.shouldAutomate=0))}),setTimeout(()=>{$("#option-export-save-button").click(),setTimeout(()=>{navigator.clipboard.readText().then(e=>{$("#import-save-textarea").val(e),$("#import-save-textarea").trigger("change"),$("#import-save-confirm-button").click()})},200)},1e3))},1e3)}),$(document).on("mouseup",function(){clearInterval(a),n=3,p.find("span").html(i("cheat.auto"))})},settings:{speedMul:10,speedEn:!1,skillMul:10,skillEn:!1,inventoryEn:!1,healthEn:!1,rebirthEn:!1,showCheat:!1},toggle:()=>{t.showCheat?(d.show(),h.show(),g.show(),m.show(),b.show(),p.show()):(d.hide(),h.hide(),g.hide(),m.hide(),b.hide(),p.hide())},changeLocale:()=>{d.find("span").find("span").html(i("cheat.speed")),h.find("span").find("span").html(i("cheat.skill")),g.find("span").html(i("cheat.health")),m.find("span").html(i("cheat.storge")),b.find("span").html(i("cheat.rebirth")),p.find("span").html(i("cheat.auto")),p.attr("data-original-title",i("cheat.autoTip")),v.find("span").html(i("cheat.toggleCheat"))}}),S.then(()=>{if(setInterval(function(){try{game&&t.speedEn&&(game.lastTimeStamp-=20*(t.speedMul-1))}catch{}},20),setInterval(function(){try{t.rebirthEn&&$("#reincarnate-button:visible").click()}catch{}},200),game){let n=game.inventory[0][0].amount.__proto__.add;game.inventory[0][0].amount.__proto__.add=function(a){return t.inventoryEn&&game.inventory.find(e=>e.find(s=>s.amount===this))&&a.lessThan(0)&&(a=new Decimal(0)),t.skillEn&&game.skills.find(e=>e.generationExperience===this||e.instinctExperience===this)&&a.greaterThan(0)&&(a=a.mul(t.skillMul)),t.healthEn&&game.health===this&&a.lessThan(0)&&(a=new Decimal(0)),n.bind(this)(a)}}}),f.cn={lang:{cn:"\u4E2D\u6587",en:"english"},cheat:{toggleCheat:"\u663E\u793A\u4FEE\u6539",speed:"\u500D\u901F",skill:"\u500D\u7ECF\u9A8C",health:"\u9501\u8840",storge:"\u9501\u5E93\u5B58",rebirth:"\u81EA\u52A8\u8F6C\u751F",auto:"\u89E3\u9501\u81EA\u52A8",autoTip:"\u8BF7\u5148\u5907\u4EFD\u5B58\u6863\uFF0C\u6B64\u64CD\u4F5C\u65E0\u64A4\u9500\uFF01<br/>(\u4F7F\u7528\u5B58\u8BFB\u6863\u65B9\u5F0F)<br/>(\u6309\u4F4F3\u79D2)"},chart:{togglePath:"\u663E\u793A\u8DEF\u7EBF",chepPrefix:"\u7B2C",chepSuffix:"\u7AE0",end:"\u7ED3\u675F",spoiler:"\u5141\u8BB8\u5267\u900F",highLightNotAuto:"\u9AD8\u4EAE\u81EA\u52A8\u672A\u89E3\u9501",jumpTo:"\u8DF3\u8F6C\u5230"}},f.en={lang:{cn:"\u4E2D\u6587",en:"English"},cheat:{toggleCheat:"Show Cheat",speed:"Times Speed",skill:"Times Exp",health:"Lock Health",storge:"Lock Storge",rebirth:"Auto Rebirth",auto:"Unlock All Auto",autoTip:"Please backup save first, can't undo!<br/>(use save and load implement)<br/>(press 3 sec)"},chart:{togglePath:"Show Path",chepPrefix:"Chep. ",chepSuffix:"",end:"End",spoiler:"Allow Spoiler",highLightNotAuto:"HighLight Automation Locked",jumpTo:"Jump To"}};export{l as btnContainer,F as changeLocale,M as doEval,S as gameLoadPromise,i as getLocal,w as init,A as load,f as locales,y as plugins,E as rootEl,o as save,t as settings,k as toggle};
